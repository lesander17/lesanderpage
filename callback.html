<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Callback TikTok</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; max-width: 820px; margin: 40px auto; line-height: 1.6; }
    code, pre { background: #f6f8fa; padding: 2px 4px; border-radius: 6px; }
    button { padding: 8px 12px; border-radius: 8px; border: 1px solid #e5e7eb; background: #111827; color: white; cursor: pointer; }
    .ok { color: #065f46 }
    .err { color: #991b1b }
  </style>
</head>
<body>
  <h1>Callback de TikTok</h1>
  <p>Si el login fue exitoso, deberías ver un parámetro <code>code</code> en la URL.</p>
  <p><strong>Code:</strong> <code id="code">—</code></p>
  <p><button id="copyBtn">Copiar code</button></p>

  <h3>¿Qué hago con este code?</h3>
  <ol>
    <li>En tu backend (Python/PHP), realiza un <em>POST</em> a <code>https://open.tiktokapis.com/v2/oauth/token/</code> con
      <code>client_key</code>, <code>client_secret</code>, <code>code</code>, <code>grant_type=authorization_code</code> y <code>redirect_uri</code>.</li>
    <li>La respuesta incluirá <code>access_token</code> y <code>refresh_token</code> para llamar a los endpoints protegidos.</li>
  </ol>

  <script>
    const sp = new URLSearchParams(window.location.search);
    const code = sp.get("code");
    const codeEl = document.getElementById("code");
    codeEl.textContent = code || "No llegó ningún ?code= en la URL";

    document.getElementById("copyBtn").onclick = () => {
      if (!code) return alert("No hay code para copiar.");
      navigator.clipboard.writeText(code).then(() => alert("Code copiado."));
    };
  </script>
</body>
</html>
